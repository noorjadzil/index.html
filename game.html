<!DOCTYPE html>
<html>
<head>
<title>Cyber Canteen Terminal HP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
body {
    font-family: 'Courier New', monospace;
    background: black;
    padding: 10px;
    margin:0;
    overflow-x:hidden;
    color:#00ff00;
}

/* MATRIX BACKGROUND */
canvas {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 0;
}

/* Hacker terminal cursor */
.cursor {
  display: inline-block;
  width: 10px;
  background-color: #00ff00;
  margin-left:2px;
  animation: blink 1s steps(2, start) infinite;
  vertical-align: bottom;
}

@keyframes blink {
  to { visibility: hidden; }
}

.box, h2, .menu {
    position: relative;
    z-index: 1;
}

h2 {
    text-align: center;
    text-shadow: 0 0 10px #00ff00;
    letter-spacing: 2px;
    font-size: 1.5em;
}

.menu {
    text-align:center;
    margin-bottom:15px;
}

.menu button {
    margin:5px;
    padding:12px 18px;
    background:black;
    border:1px solid #00ff00;
    color:#00ff00;
    cursor:pointer;
    font-weight:bold;
    font-size:1em;
    border-radius:5px;
}

.menu button:hover {
    background:#003300;
}

/* BOX DAN INPUT SIMETRIS */
.box {
    background: rgba(0,0,0,0.85);
    border:1px solid #00ff00;
    border-radius: 8px;
    padding: 15px;
    margin: 15px auto;
    width: 90%;
    max-width: 350px;
    text-align: center; /* center teks & tombol */
}

input, select {
    width: 90%;
    text-align: center; /* teks di tengah */
    padding: 8px;
    margin: 5px 0;
    border-radius: 4px;
    border: 1px solid #00ff00;
    background:black;
    color:#00ff00;
    font-size:0.9em;
    height: 35px;
}

input#namaSiswa {
    maxlength: 15; /* batasi panjang nama agar simetris */
}

button {
    padding: 12px;
    margin-top: 10px;
    border: 1px solid #00ff00;
    border-radius: 4px;
    background:black;
    color:#00ff00;
    cursor: pointer;
    font-weight: bold;
    font-size:1em;
}

button:hover {
    background:#003300;
}

table {
    border-collapse: collapse;
    margin-top: 10px;
    width: 100%;
    font-size: 0.9em;
}

th {
    background: black;
    color: #00ff00;
}

th, td {
    border: 1px solid #00ff00;
    padding: 6px;
    text-align: center;
}

tr:nth-child(even) {
    background: rgba(0,255,0,0.05);
}
</style>
</head>

<body>

<canvas id="matrix"></canvas>

<h2>CYBER CANTEEN TERMINAL<span class="cursor"></span></h2>

<div class="menu">
    <button onclick="showTab('siswa')">Database Agent</button>
    <button onclick="showTab('transaksi')">Execute Transaction</button>
    <button onclick="showTab('riwayatTab')">Access Log</button>
</div>

<div class="box" id="siswa">
    <h3>Register New Agent<span class="cursor"></span></h3>
    <input type="text" id="namaSiswa" placeholder="Enter Agent Name">
    <button onclick="tambahSiswa()">Register</button>
</div>

<div class="box" id="transaksi" style="display:none;">
    <h3>Execute Transaction Protocol<span class="cursor"></span></h3>
    <select id="pilihSiswa"></select><br>
    <input type="text" id="barang" placeholder="Item Code">
    <input type="number" id="harga" placeholder="Unit Value">
    <input type="number" id="jumlah" placeholder="Quantity">
    <button onclick="simpanTransaksi()">Execute</button>
</div>

<div class="box" id="riwayatTab" style="display:none;">
    <h3>Transaction Access Log<span class="cursor"></span></h3>
    <select id="lihatSiswa" onchange="tampilkanRiwayat()"></select>
    <table>
        <thead>
            <tr>
                <th>Timestamp</th>
                <th>Item Code</th>
                <th>Unit Value</th>
                <th>Quantity</th>
                <th>Total Credit</th>
            </tr>
        </thead>
        <tbody id="riwayat"></tbody>
    </table>
</div>

<script>
/* MATRIX BACKGROUND */
const canvas = document.getElementById("matrix");
const ctx = canvas.getContext("2d");

function resize(){
    canvas.height = window.innerHeight;
    canvas.width = window.innerWidth;
}
resize();
window.addEventListener("resize", resize);

const text = "NOOR JADZIL  ";
const fontSize = 16;
let columns = canvas.width / fontSize;
let drops = [];

for(let i = 0; i < columns; i++){
    drops[i] = 1;
}

function draw(){
    ctx.fillStyle = "rgba(0, 0, 0, 0.12)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = "#00ff00";
    ctx.font = fontSize + "px monospace";

    for(let i = 0; i < drops.length; i++){
        const char = text[Math.floor(Math.random() * text.length)];
        ctx.fillText(char, i * fontSize, drops[i] * fontSize);

        if(drops[i] * fontSize > canvas.height && Math.random() > 0.975){
            drops[i] = 0;
        }
        drops[i]++;
    }
}
setInterval(draw, 50);

/* SISTEM CYBER CANTEEN */
let siswa = JSON.parse(localStorage.getItem("siswa")) || [];
let transaksi = JSON.parse(localStorage.getItem("transaksi")) || [];

function simpanData(){
    localStorage.setItem("siswa", JSON.stringify(siswa));
    localStorage.setItem("transaksi", JSON.stringify(transaksi));
}

function renderSiswa(){
    let pilih = document.getElementById("pilihSiswa");
    let lihat = document.getElementById("lihatSiswa");
    pilih.innerHTML = "";
    lihat.innerHTML = "";

    siswa.forEach(nama=>{
        pilih.innerHTML += `<option value="${nama}">${nama}</option>`;
        lihat.innerHTML += `<option value="${nama}">${nama}</option>`;
    });
}

function tambahSiswa(){
    let nama = document.getElementById("namaSiswa").value;
    if(!nama) return alert("ACCESS DENIED: Enter Agent Name");
    siswa.push(nama);
    simpanData();
    renderSiswa();
    document.getElementById("namaSiswa").value="";
}

function simpanTransaksi(){
    let nama = document.getElementById("pilihSiswa").value;
    let barang = document.getElementById("barang").value;
    let harga = parseInt(document.getElementById("harga").value);
    let jumlah = parseInt(document.getElementById("jumlah").value);

    if(!nama || !barang || !harga || !jumlah){
        alert("PROTOCOL ERROR: Incomplete Data");
        return;
    }

    let tgl = new Date().toLocaleDateString();
    let subtotal = harga * jumlah;

    transaksi.push({nama, tgl, barang, harga, jumlah, subtotal});
    simpanData();

    document.getElementById("barang").value="";
    document.getElementById("harga").value="";
    document.getElementById("jumlah").value="";

    alert("TRANSACTION SUCCESSFUL");
    tampilkanRiwayat();
}

function tampilkanRiwayat(){
    let nama = document.getElementById("lihatSiswa").value;
    let tbody = document.getElementById("riwayat");
    tbody.innerHTML="";

    transaksi
        .filter(t=>t.nama===nama)
        .forEach(t=>{
            tbody.innerHTML += `
            <tr>
                <td>${t.tgl}</td>
                <td>${t.barang}</td>
                <td>${t.harga}</td>
                <td>${t.jumlah}</td>
                <td>${t.subtotal}</td>
            </tr>`;
        });
}

function showTab(tabName){
    document.getElementById("siswa").style.display = "none";
    document.getElementById("transaksi").style.display = "none";
    document.getElementById("riwayatTab").style.display = "none";
    document.getElementById(tabName).style.display = "block";
}

renderSiswa();
</script>

</body>
</html>